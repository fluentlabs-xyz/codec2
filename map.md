# Map

# WASM simple

0  03000000 - 3    - количество элементов
4  14000000 - 20   - keys offset
8  0c000000 - 12   - keys length in bytes
12 20000000 - 32   - values offset
16 0c000000 - 12   - values length in bytes
20 03000000 - 3    - keys data el 1
24 64000000 - 100  - keys data el 2
28 e8030000 - 1000 - keys data el 3
32 05000000 - 5    - values data el 1
36 14000000 - 20   - values data el 2
40 3c000000 - 60   - values data el 3

# Sol simple
offset
length
keys offset
values offset
keys size
keys data
values size
values data

0  03000000 - 3    - количество элементов


Понял, я представлю данные в запрошенном вами формате, с пояснениями для каждого значения:

0   - 0000000000000000000000000000000000000000000000000000000000000020 - offset to the start of the data (32 в десятичной системе)
32  - 0000000000000000000000000000000000000000000000000000000000000003 - length of the map (3 пары ключ-значение)
64  - 0000000000000000000000000000000000000000000000000000000000000040 - offset to the keys (64 в десятичной системе)
96  - 0000000000000000000000000000000000000000000000000000000000000100 - offset to the values (256 в десятичной системе)
128 - 0000000000000000000000000000000000000000000000000000000000000003 - keys size (3 ключа)
160 - 0000000000000000000000000000000000000000000000000000000000000001 - keys data (первый ключ: 1)
192 - 000000000000000000000000000000000000000000000000000000000000000a - keys data (второй ключ: 10)
224 - 0000000000000000000000000000000000000000000000000000000000000064 - keys data (третий ключ: 100)
256 - 0000000000000000000000000000000000000000000000000000000000000003 - values size (3 значения)
288 - 0000000000000000000000000000000000000000000000000000000000000005 - values data (первое значение: 5)
320 - 0000000000000000000000000000000000000000000000000000000000000014 - values data (второе значение: 20)
352 - 000000000000000000000000000000000000000000000000000000000000003c - values data (третье значение: 60)


0   - 0000000000000000000000000000000000000000000000000000000000000020 - data_offset (32 в десятичной системе)
32  - 0000000000000000000000000000000000000000000000000000000000000003 - data_len (3 элемента в векторе)
64  - 0000000000000000000000000000000000000000000000000000000000000001 - data (первый элемент: 1)
96  - 0000000000000000000000000000000000000000000000000000000000000002 - data (второй элемент: 2)
128 - 0000000000000000000000000000000000000000000000000000000000000003 - data (третий элемент: 3)






Давайте разберем эти данные для вложенной мапы. Я буду комментировать каждый сегмент данных:

0   - 0000000000000000000000000000000000000000000000000000000000000020 - offset to the start of the data (32)
32  - 0000000000000000000000000000000000000000000000000000000000000003 - length of the outer map (3 пары)
64  - 0000000000000000000000000000000000000000000000000000000000000040 - offset to the keys of outer map (64)
96  - 0000000000000000000000000000000000000000000000000000000000000100 - offset to the values of outer map (256)
128 - 0000000000000000000000000000000000000000000000000000000000000003 - keys size of outer map (3)
160 - 0000000000000000000000000000000000000000000000000000000000000003 - keys data (first key: 3)
192 - 0000000000000000000000000000000000000000000000000000000000000064 - keys data (second key: 100)
224 - 00000000000000000000000000000000000000000000000000000000000003e8 - keys data (third key: 1000)
256 - 0000000000000000000000000000000000000000000000000000000000000003 - values size of outer map (3)
288 - 0000000000000000000000000000000000000000000000000000000000000180 - offset to first inner map (384)
320 - 0000000000000000000000000000000000000000000000000000000000000000 - offset to second inner map (empty map)
352 - 00000000000000000000000000000000000000000000000000000000000001a0 - offset to third inner map (416)

Первая внутренняя мапа (для ключа 100):
384 - 00000000000000000000000000000000000000000000000000000000000001c0 - offset to the start of inner map data (448)
416 - 0000000000000000000000000000000000000000000000000000000000000002 - length of inner map (2 пары)
448 - 00000000000000000000000000000000000000000000000000000000000001c0 - offset to keys of inner map (448)
480 - 0000000000000000000000000000000000000000000000000000000000000220 - offset to values of inner map (544)
512 - 0000000000000000000000000000000000000000000000000000000000000002 - keys size of inner map (2)
544 - 0000000000000000000000000000000000000000000000000000000000000001 - keys data (first inner key: 1)
576 - 0000000000000000000000000000000000000000000000000000000000000003 - keys data (second inner key: 3)
608 - 0000000000000000000000000000000000000000000000000000000000000002 - values size of inner map (2)
640 - 0000000000000000000000000000000000000000000000000000000000000002 - values data (first inner value: 2)
672 - 0000000000000000000000000000000000000000000000000000000000000004 - values data (second inner value: 4)

Вторая внутренняя мапа (для ключа 3):
704 - 0000000000000000000000000000000000000000000000000000000000000000 - пустая мапа

Третья внутренняя мапа (для ключа 1000):
736 - 0000000000000000000000000000000000000000000000000000000000000280 - offset to the start of inner map data (640)
768 - 0000000000000000000000000000000000000000000000000000000000000002 - length of inner map (2 пары)
800 - 0000000000000000000000000000000000000000000000000000000000000280 - offset to keys of inner map (640)
832 - 00000000000000000000000000000000000000000000000000000000000002e0 - offset to values of inner map (736)
864 - 0000000000000000000000000000000000000000000000000000000000000002 - keys size of inner map (2)
896 - 0000000000000000000000000000000000000000000000000000000000000007 - keys data (first inner key: 7)
928 - 0000000000000000000000000000000000000000000000000000000000000009 - keys data (second inner key: 9)
960 - 0000000000000000000000000000000000000000000000000000000000000002 - values size of inner map (2)
992 - 0000000000000000000000000000000000000000000000000000000000000008 - values data (first inner value: 8)
1024- 0000000000000000000000000000000000000000000000000000000000000004 - values data (second inner value: 4)

Итоговая структура соответствует предоставленному коду Rust:
{
  100: {1: 2, 3: 4},
  3: {},
  1000: {7: 8, 9: 4}
}